{% extends "baseApp.html" %}
{% load static %}

{% block title %}Accueil{% endblock %}

{% block content %}

<!-- Boxicons CDN -->
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

<!-- Slider Container -->
 <br class="mt-8 md:hidden">
<div class="w-full h-72 sm:h-96 md:h-[475px] mt-8 rounded-3xl overflow-hidden shadow-2xl relative group" style="border: 2px solid transparent;" data-gradient-border>
  <div id="slider" class="w-full h-full bg-cover bg-center transition-all duration-1000 ease-in-out"></div>

  <!-- Text Overlay -->
  <p id="slide-text"
     class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-light text-center px-6 leading-tight tracking-wide drop-shadow-lg">
  </p>

  <!-- Navigation Dots -->
  <div id="dots" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-3 z-20"></div>

  <!-- Navigation Arrows -->
  <button id="prev"
          aria-label="Slide précédente"
          class="absolute left-3 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black/40 hover:bg-black/60 text-white rounded-full flex items-center justify-center transition-all duration-300 opacity-0 group-hover:opacity-100 z-30 backdrop-blur-sm">
    <i class='bx bx-chevron-left text-xl'></i>
  </button>
  <button id="next"
          aria-label="Slide suivante"
          class="absolute right-3 top-1/2 transform -translate-y-1/2 w-10 h-10 bg-black/40 hover:bg-black/60 text-white rounded-full flex items-center justify-center transition-all duration-300 opacity-0 group-hover:opacity-100 z-30 backdrop-blur-sm">
    <i class='bx bx-chevron-right text-xl'></i>
  </button>
</div>

<!-- Gradient Border via CSS -->
<style>
  [data-gradient-border] {
    position: relative;
  }
  [data-gradient-border]::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 1rem;
    background: linear-gradient(45deg, #a2189279, #e959c043, #a2189200);
    z-index: -1;
    pointer-events: none;
  }
</style>

<!-- Main Content -->
<div class="mt-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">

  <!-- Section: Films & Séries -->
  <section class="mb-16">
    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between mb-8">
      <div class="mb-4 sm:mb-0">
        <h2 class="text-white text-3xl sm:text-4xl md:text-5xl font-normal leading-tight">Films et Séries</h2>
        <p class="text-gray-400 text-base sm:text-lg mt-2">Sexy photos · Modèle sexy · Charme</p>
      </div>
       
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for video in videos %}
        {% include "partials/_videos.html" %}
      {% empty %}
        <p class="text-gray-500 col-span-full text-center py-4">Aucune vidéo disponible.</p>
      {% endfor %}
    </div>
  </section>

  <!-- Section: Short Videos -->
  <section class="mb-16">
    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between mb-8">
      <div class="mb-4 sm:mb-0">
        <h2 class="text-white text-3xl sm:text-4xl md:text-5xl font-normal leading-tight">Short Videos</h2>
        <p class="text-gray-400 text-base sm:text-lg mt-2">Sexy photos · Modèle sexy · Charme</p>
      </div>
      <a href="{% url 'shorts' %}"
         class="inline-flex items-center gap-2 bg-[#a21892] hover:bg-[#8a147d] text-white px-6 py-2.5 rounded-full text-sm font-medium transition-colors duration-300">
        <span>Voir plus</span>
        <i class='bx bx-chevron-right text-lg'></i>
      </a>
    </div>

    <div id="short_videos" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3">
      {% for video in short_videos %}
        {% include "partials/_short_video.html" %}
      {% empty %}
        <p class="text-red-400 col-span-full text-center py-4">Aucun short vidéo disponible.</p>
      {% endfor %}
    </div>
  </section>

  <!-- Section: Photos -->
  <section class="mb-16">
    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between mb-8">
      <div class="mb-4 sm:mb-0">
        <h2 class="text-white text-3xl sm:text-4xl md:text-5xl font-normal leading-tight">Photos</h2>
        <p class="text-gray-400 text-base sm:text-lg mt-2">Sexy photos · Modèle sexy · Charme</p>
      </div>
      <a href="{% url 'photos' %}"
         class="inline-flex items-center gap-2 bg-[#a21892] hover:bg-[#8a147d] text-white px-6 py-2.5 rounded-full text-sm font-medium transition-colors duration-300">
        <span>Voir plus</span>
        <i class='bx bx-chevron-right text-lg'></i>
      </a>
    </div>

    <div class="columns-2 sm:columns-2 md:columns-3 lg:columns-4 xl:columns-5 gap-4 space-y-4">
      {% for photo in photos %}
        <div class="break-inside-avoid">
          <img  src="{{ photo.image.url }}"
               alt="{{ photo.title|default:'Photo' }}"
               class="w-full h-auto rounded-lg shadow-md hover:scale-[1.02] transition-transform duration-300">
        </div>
      {% empty %}
        <p class="text-red-400 col-span-full text-center py-4">Aucune photo disponible.</p>
      {% endfor %}
    </div>
  </section>
</div>

<!-- Slider Script -->




        <script>
      // Tableaux des images et textes
      {% comment %} const slides = [
        { image: "{% static 'img/image.png' %}", text: "La Verite & La Luxure De Mes Voisin" },
        { image: "{% static 'img/image.png' %}", text: "Un Monde Secret Derriere la Porte" },
        { image: "{% static 'img/image.png' %}", text: "Découverte Interdite" },
        { image: "{% static 'img/image.png' %}", text: "L'Ombre Et La Lumière" },
        { image: "{% static 'img/image.png' %}", text: "Passions Dévorantes" },
        { image: "{% static 'img/image.png' %}", text: "Le Jour où Tout a Changé" }
      ]; {% endcomment %}

      const host = "{{ request.get_host }}";

        const slides = [
          {% for slide in slides %}
            { image: `{{ host }}{{ slide.film.cover_film.url }}`, text: "{{ slide.film.title }}" },
          {% endfor %}
        ];






      let currentIndex = 0;
      const slider = document.getElementById("slider");
      const slideText = document.getElementById("slide-text");
      const dotsContainer = document.getElementById("dots");
      const prevBtn = document.getElementById("prev");
      const nextBtn = document.getElementById("next");

      // Créer les dots
      function createDots() {
        dotsContainer.innerHTML = '';
        slides.forEach((_, index) => {
          const dot = document.createElement('div');
          dot.className = index === 0 
            ? "w-4 h-4 bg-[#ba0fb49e] rounded-full cursor-pointer"
            : "w-4 h-4 bg-white rounded-full cursor-pointer";
          dot.addEventListener("click", () => goToSlide(index));
          dotsContainer.appendChild(dot);
        });
      }

      // Mettre à jour le slider
      function updateSlider() {
        slider.style.backgroundImage = `url('${slides[currentIndex].image}')`;
        slideText.textContent = slides[currentIndex].text;

        // Mettre à jour les dots
        Array.from(dotsContainer.children).forEach((dot, index) => {
          dot.className = index === currentIndex
            ? "w-4 h-4 bg-[#ba0fb49e] rounded-full cursor-pointer"
            : "w-4 h-4 bg-white rounded-full cursor-pointer";
        });
      }

      // Navigation manuelle
      function goToSlide(index) {
        currentIndex = index;
        updateSlider();
      }

      function nextSlide() {
        currentIndex = (currentIndex + 1) % slides.length;
        updateSlider();
      }

      function prevSlide() {
        currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        updateSlider();
      }

      // Auto-play toutes les 5 secondes
      let autoPlayInterval = setInterval(nextSlide, 5000);

      // Réinitialiser autoplay au clic
      function resetAutoPlay() {
        clearInterval(autoPlayInterval);
        autoPlayInterval = setInterval(nextSlide, 5000);
      }

      // Événements
      nextBtn.addEventListener("click", () => {
        nextSlide();
        resetAutoPlay();
      });

      prevBtn.addEventListener("click", () => {
        prevSlide();
        resetAutoPlay();
      });

      // Initialisation
      createDots();
      updateSlider();
    </script> 

{% endblock %}